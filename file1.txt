updated feature. very complicated stuff

green
logout complicated logic

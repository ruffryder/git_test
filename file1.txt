updated feature. very complicated stuff

logout complicated logic